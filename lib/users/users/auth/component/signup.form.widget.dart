import 'package:http/http.dart' as http;import 'package:flutter/material.dart';import 'package:google_fonts/google_fonts.dart';import 'package:hygeia/users/users/model/patient.dart';import '../widget.login.dart';import '../widget.signup2.dart';class SignupForm extends StatefulWidget {  @override  _SignupFormState createState() => _SignupFormState();}class _SignupFormState extends State<SignupForm> {  TextEditingController email_controlleur ;  TextEditingController password_controlleur ;  TextEditingController nom_controlleur;  TextEditingController prenom_controlleur   ;  TextEditingController confirmpassword_controlleur ;  double he = 0.00127 ;  final _formKey = GlobalKey<FormState>();  bool show_password = false ;  @override  void initState() {    email_controlleur = TextEditingController();    password_controlleur = TextEditingController();    confirmpassword_controlleur = TextEditingController();    nom_controlleur = TextEditingController();    prenom_controlleur = TextEditingController();    super.initState();  }  @override  Widget build(BuildContext context) {    double height = MediaQuery.of(context).size.height;    double width = MediaQuery.of(context).size.width ;    return  Form(        key: _formKey,        child: Padding(            padding: EdgeInsets.symmetric(horizontal: 20,vertical: 5),            child: SingleChildScrollView(                child: Column(                  children: [                    SizedBox(                      height: 22,                    ),                    Text("Inscription",style: GoogleFonts.archivo(                        fontSize: 35 * height * 0.0015,color: Color.fromRGBO(1, 85, 156, 1),                        fontWeight: FontWeight.bold                    ),                    ),                    SizedBox(                      height: height *0.03,                    ),                    Column(                      crossAxisAlignment: CrossAxisAlignment.start,                      children: [                        Padding(                            padding: EdgeInsets.only(left: width * 0.045),                            child: Text(                              "Nom :",                              style: GoogleFonts.archivo(                                fontStyle: FontStyle.italic,                                fontWeight: FontWeight.w500,                                fontSize: 13 * height * 0.0015,                                color: Color.fromRGBO(00, 88, 243,1),                              ),                            )),                        SizedBox(                          height: 2,                        ),                        TextFormField(                            validator: (value) {                              if (value.length > 4) {                                return null;                              } else {                                return "Vous devez entrer votre nom";                              }                            },                            controller: nom_controlleur,                            onChanged: (value) {                            },                            decoration: InputDecoration(                              errorStyle:   GoogleFonts.archivo(                                fontSize: 10*height * 0.0015,                                color: Colors.red,                              ),                              hintStyle: GoogleFonts.archivo(color: Color.fromRGBO(148, 148, 158, 0.6,),fontSize: 13,fontStyle: FontStyle.italic),                              hintText: "Entrer votre nom",                              contentPadding: new EdgeInsets.symmetric(vertical: 15.0, horizontal: 15.0),                              fillColor: Colors.white,                              filled: true,                              errorBorder: OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,                                ),                              ),                              focusedErrorBorder:    OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,),),                              enabledBorder: OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,                                ),                              ),                              focusedBorder: OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,                                ),                              ),                            )                        ),                      ],),                    SizedBox(                      height: 8 * height * 0.0015,                    ),                    Column(                      crossAxisAlignment: CrossAxisAlignment.start,                      children: [                        Padding(                            padding: EdgeInsets.only(left: width * 0.045),                            child: Text(                              "Prénom :",                              style: GoogleFonts.archivo(                                fontStyle: FontStyle.italic,                                fontWeight: FontWeight.w500,                                fontSize: 13 * height * 0.0015,                                color: Color.fromRGBO(00, 88, 243,1),                              ),                            )),                        SizedBox(                          height: 2,                        ),                        TextFormField(                            validator: (value) {                              if (nom_controlleur.text.length < 5) {                                return null ;                              }else {                                if(value.length < 5) {                                  return "vous devez entrer votre prénom" ;                                }else{                                  return null;                                }                              }                            },                            controller: prenom_controlleur,                            onChanged: (value) {                            },                            decoration: InputDecoration(                              errorStyle:   GoogleFonts.archivo(                                fontSize: 10*height * 0.0015,                                color: Colors.red,                              ),                              hintStyle: GoogleFonts.archivo(color: Color.fromRGBO(148, 148, 158, 0.6,),fontSize: 13,fontStyle: FontStyle.italic),                              hintText: "Entrer votre prénom",                              contentPadding: new EdgeInsets.symmetric(vertical: 15.0, horizontal: 15.0),                              fillColor: Colors.white,                              filled: true,                              errorBorder: OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,                                ),                              ),                              focusedErrorBorder:    OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,),),                              enabledBorder: OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,                                ),                              ),                              focusedBorder: OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,                                ),                              ),                            )                        ),                      ],),                    SizedBox(                      height: 8 * height * 0.0015,                    ),                    Column(                      crossAxisAlignment: CrossAxisAlignment.start,                      children: [                        Padding(                            padding: EdgeInsets.only(left: width * 0.045),                            child: Text(                              "Adresse e-mail :",                              style: GoogleFonts.archivo(                                fontStyle: FontStyle.italic,                                fontWeight: FontWeight.w500,                                fontSize: 13 * height * 0.0015,                                color: Color.fromRGBO(00, 88, 243,1),                              ),                            )),                        SizedBox(                          height: 2,                        ),                        TextFormField(                            validator: (value) {                              if (prenom_controlleur.text.length < 5) {                                return null;                              }else {                                if(RegExp('^[a-zA-Z][a-zA-Z]?.[a-zA-Z]*@esi-sba.dz').hasMatch(value)) {                                  return null ;                                }else {                                  return "vous devez entrer votre e-mail" ;                                }                              }                            },                            controller: email_controlleur,                            onChanged: (value) {                            },                            decoration: InputDecoration(                              errorStyle:   GoogleFonts.archivo(                                fontSize: 10*height * 0.0015,                                color: Colors.red,                              ),                              hintStyle: GoogleFonts.archivo(color: Color.fromRGBO(148, 148, 158, 0.6,),fontSize: 13,fontStyle: FontStyle.italic),                              hintText: "Entrer votre adresse e-mail",                              contentPadding: new EdgeInsets.symmetric(vertical: 15.0, horizontal: 15.0),                              fillColor: Colors.white,                              filled: true,                              errorBorder: OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,                                ),                              ),                              focusedErrorBorder:    OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,),),                              enabledBorder: OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,                                ),                              ),                              focusedBorder: OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,                                ),                              ),                            )                        ),                      ],),                    SizedBox(                      height: 8 * height * 0.0015,                    ),                    Column(                      crossAxisAlignment: CrossAxisAlignment.start,                      children: [                        Padding(                            padding: EdgeInsets.only(left: width * 0.045),                            child: Text(                              "Mot de passe :",                              style: GoogleFonts.archivo(                                fontStyle: FontStyle.italic,                                fontWeight: FontWeight.w500,                                fontSize: 13 * height * 0.0015,                                color: Color.fromRGBO(00, 88, 243,1),                              ),                            )),                        SizedBox(                          height: 2,                        ),                        TextFormField(                            obscureText: true,                            validator: (value) {                              if (!RegExp('^[a-zA-Z][a-zA-Z]?.[a-zA-Z]*@esi-sba.dz').hasMatch(email_controlleur.text)) {                                return null ;                              }else {                                if(password_controlleur.text.length < 7) {                                  return "Entrer un mot de passe a 8 lettres au minimum" ;                                }else {                                  return null ;                                }                              }                            },                            controller: password_controlleur,                            onChanged: (value) {                            },                            decoration: InputDecoration(                              errorStyle:   GoogleFonts.archivo(                                fontSize: 10*height * 0.0015,                                color: Colors.red,                              ),                              hintStyle: GoogleFonts.archivo(color: Color.fromRGBO(148, 148, 158, 0.6,),fontSize: 13,fontStyle: FontStyle.italic),                              hintText: "Entrer votre mot de passe",                              contentPadding: new EdgeInsets.symmetric(vertical: 15.0, horizontal: 15.0),                              fillColor: Colors.white,                              filled: true,                              errorBorder: OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,                                ),                              ),                              focusedErrorBorder:    OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,),),                              enabledBorder: OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,                                ),                              ),                              focusedBorder: OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,                                ),                              ),                            )                        ),                      ],),                    SizedBox(                      height: 8 * height * 0.0015,                    ),                    Column(                      crossAxisAlignment: CrossAxisAlignment.start,                      children: [                        Padding(                            padding: EdgeInsets.only(left: width * 0.045),                            child: Text(                              "Confirmer mot de passe :",                              style: GoogleFonts.archivo(                                fontStyle: FontStyle.italic,                                fontWeight: FontWeight.w500,                                fontSize: 13 * height * 0.0015,                                color: Color.fromRGBO(00, 88, 243,1),                              ),                            )),                        SizedBox(                          height: 2,                        ),                        TextFormField(                            obscureText: true,                            validator: (value) {                              if(password_controlleur.text.length < 7) {                                return null ;                              }else {                                if(value.isEmpty) {                                  return "vous devez confirmer votre mot de passe" ;                                }else if(value != password_controlleur.text) {                                  return "vous devez entrer le mème mot de passe" ;                                }else {                                  return null ;                                }                              }                            },                            controller: confirmpassword_controlleur,                            onChanged: (value) {                            },                            decoration: InputDecoration(                              errorStyle:   GoogleFonts.archivo(                                fontSize: 10*height * 0.0015,                                color: Colors.red,                              ),                              hintStyle: GoogleFonts.archivo(color: Color.fromRGBO(148, 148, 158, 0.6,),fontSize: 13,fontStyle: FontStyle.italic),                              hintText: "Entrer votre mot de passe",                              contentPadding: new EdgeInsets.symmetric(vertical: 15.0, horizontal: 15.0),                              fillColor: Colors.white,                              filled: true,                              errorBorder: OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,                                ),                              ),                              focusedErrorBorder:    OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,),),                              enabledBorder: OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,                                ),                              ),                              focusedBorder: OutlineInputBorder(                                borderRadius: BorderRadius.circular(30),                                borderSide:  BorderSide(                                  color: Colors.white,                                  width: 0.0,                                ),                              ),                            )                        ),                      ],),                    SizedBox(                      height: 8 * height * 0.0015,                    ),                    Align(                        alignment: Alignment.topLeft,                        child: Builder(                          builder: (context) {                            if(password_controlleur.text.length < 7) {                              return Text("Mot de passe faible",style: GoogleFonts.archivo(color: Colors.red,fontSize: 11,fontStyle: FontStyle.italic,fontWeight: FontWeight.w500),);                            }else if (password_controlleur.text.length < 11) {                              return Text("Mot de passe Moyenne",style: GoogleFonts.archivo(color: Colors.orange,fontSize: 11,fontStyle: FontStyle.italic,fontWeight: FontWeight.w500),);                            }else {                              return Text("Mot de passe Execellent",style: GoogleFonts.archivo(color: Colors.green,fontSize: 11,fontStyle: FontStyle.italic,fontWeight: FontWeight.w500),);                            }                          },                        )),                    SizedBox(                      height: 8 * height * 0.0030,                    ),                    InkWell(                      onTap: () async {                    //  var url = Uri.parse("http://192.168.1.11:2000/");                   //     var response = await http.post(url,body: {                    //      'name' : "djellali",                     //     "lastname" : "fouad",                   //     }).then((value) {                   //       print(value.body);                   //       print("here we go again");                   //     });                    //    Navigator.push(context, MaterialPageRoute(builder: (context)=>SignUp2()));                        if (_formKey.currentState.validate()) {                          Patient patient = new Patient(                            name: this.nom_controlleur.text,                            lastname: this.prenom_controlleur.text,                            email: this.email_controlleur.text,                            password: this.password_controlleur.text,                          );                          // If the form is valid, display a snackbar. In the real world,                          // you'd often call a server or save the information in a database.                            Navigator.push(context, MaterialPageRoute(builder: (context)=>SignUp2(patient)));                        }                      },                      child: Align(                          alignment: Alignment.centerRight,                          child: Container(                            height: 50,                            width: 50,                            decoration: BoxDecoration(                                borderRadius: BorderRadius.circular(30),                                color: Color.fromRGBO(1, 85, 156, 1)                            ),                            child: Icon(Icons.arrow_forward_sharp,color: Colors.white,size: 32,),                          )),                    ),                    SizedBox(                      height: 8 * height * 0.0034,                    ),                    InkWell(onTap: () {                      Navigator.push(context, MaterialPageRoute(builder: (context)=>Login()));                    },                        child: Text("Vous avez un compte ? Connexion",textAlign: TextAlign.center ,style :GoogleFonts.archivo(fontStyle: FontStyle.italic,color: Color.fromRGBO(58, 122, 254, 1),fontSize:height * 0.0013* 13.92,fontWeight: FontWeight.w500,))),                  ],                ))));  }}